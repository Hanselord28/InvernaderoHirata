<!DOCTYPE html>
<html lang="es">
<%- include('../partials/head')%>
<body>
  <!-- Sidebar -->
  <%- include('../partials/aside') %>

  <!-- Main -->
  <main>
    <%- include('../partials/header') %>

    <!-- INICIO -->
    <section id="inicio" class="view active">
      <h2>Resumen</h2>
      <div class="grid three">
        <div class="card">
          <h3><span class="chip"> 
            <svg viewBox="0 0 24 24" width="16" height="16"><path d="M12 2C8 7 6 9.5 6 12a6 6 0 0012 0c0-2.5-2-5-6-10z"/></svg>
            Humedad</span></h3>
          <div class="kpi"><div class="value" id="kpiHum">78%</div><div class="trend" id="kpiTrend">+2% vs ayer</div></div>
          <div id="alertHum" class="alert hidden">Advertencia: Humedad por sobre 80%. Revisa ventilación.</div>
          <canvas id="humChart" height="120"></canvas>
        </div>
        <div class="card">
          <h3><span class="chip">
            <svg viewBox="0 0 24 24" width="16" height="16"><path d="M14 14.76V5a2 2 0 10-4 0v9.76A4 4 0 1014 14.76z"/></svg>
            Temperatura</span></h3>
          <div class="kpi"><div class="value">22°C</div><div class="trend">estable</div></div>
          <canvas id="tempChart" height="120"></canvas>
        </div>
        <div class="card">
          <h3><span class="chip">
            <svg viewBox="0 0 24 24" width="16" height="16"><path d="M7 2h2v2h6V2h2v2h3v18H4V4h3V2zm13 8H4v10h16V10z"/></svg>
            Próximos riegos</span></h3>
            <button class="btn secondary mb-12" id="refreshBtn">
              <img src="/res/gota.png" alt="Refresh" width="16" height="16" />
                Riego Manual
            </button>
          <ul class="list-tight">
            <li>Lun 07:30 · 15:00 <span class="pill ok">Programado</span></li>
            <li>Mié 07:30 · 15:00 <span class="pill ok">Programado</span></li>
            <li>Vie 07:30 · 15:00 <span class="pill warn">Pendiente</span></li>
          </ul>
          <div class="row mt-12 ai-center">
            <svg class="bell" id="bell" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22a2 2 0 002-2H10a2 2 0 002 2zm6-6V11a6 6 0 10-12 0v5l-2 2v1h16v-1l-2-2z"/></svg>
            <span class="muted"> Notificaciones activas</span>
          </div>
        </div>
      </div>

      <div class="grid two mt-22">
        <div class="card">
          <h3>Calendario de riegos</h3>
          <table>
            <thead><tr><th>Hora</th><th>Evento</th><th>Detalle</th></tr></thead>
            <tbody>
              <tr><td>12:00</td><td>Lectura</td><td>Humedad 78% (#A1)</td></tr>
              <tr><td>11:00</td><td>Lectura</td><td>Temp 22°C (#B2)</td></tr>
              <tr><td>10:30</td><td>Alerta</td><td>HR > 82% en #C3</td></tr>
            </tbody>
          </table>
        </div>
        <div class="card">
          <h3>Estado de sensores</h3>
          <canvas id="sensPie" height="160"></canvas>
        </div>
      </div>
    </section>
    <!-- CALENDARIO-->
    <%- include('../partials/calendario') %>

    <!-- SENSORES -->
    <%- include('../partials/sensores') %>

    <!-- HISTORIAL -->
    <%- include('../partials/historial') %>

    <!-- BD -->
    <%- include('../partials/BD') %>

    <!-- PRUEBAS -->
    <%- include('../partials/pruebas') %>
  </main>

  <!-- Lógica -->
  <script src="app.js"></script>
</body>
</html>